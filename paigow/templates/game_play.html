{% extends "paigow/base_site.html" %}
{% load static %}{% load paigow_extras %}

{% block extra-stylesheet %}
  <link rel="stylesheet" type="text/css" href="{% static "css/pgtile.css" %}" />
{% endblock %}

{% block content_title %}<h1>{{ game.name }}</h1>{% endblock %}

{% block jquery-doc-ready %}
    //  Fade the sets in, in order
    $(".set-1").fadeIn( 500);
    $(".set-2").fadeIn(1000);
    $(".set-3").fadeIn(1500);
    
    //  The tiles are draggable
    //  TBD: put this in pgtile.html, how to do that while including it several times
    $(".pgtile").draggable();
    
    //  The spans holding the hands are draggable
    //  TBD: put this in hand.html, how to do that while including it several times
    $(".pgset").droppable(
        { 
          revert: 'invalid',
          drop: function(event, ui) { alert("dropped"); } }
      );

    //  Given a tile that's being dragged and a set it's being dragged over, only
    //  allow tiles to be dragged into sets that already contain them.  The tile id
    //  should start with the set id.
    function set_can_take_tile( drop_set, drag_tile )
    {
      set_id = drop_set.id;
      tile_id = drag_tile.id;
      return ( tile_id.substr( 0, set_id.length() == set_id ) );
    }

{% endblock %}

<!-- 'content' block is placed in base_site.html; override it here to show this content. -->

{% block content %}
  <!-- Info about the game -->
  <p class="lead">Playing against <strong>{{ game|opponent_for_game:player }}</strong>
  <font class="lead pull-right">Score: <strong>10 - 6</strong></font>

  <br><br>
  
  <!-- Commands in the game -->
  <div class="btn-toolbar">
    <button class="btn btn-small btn-primary" type="button">Deal</button>
    <button class="btn btn-small btn-primary" type="button">Pause</button>
  </div>
  
  <!-- This div shows the 3-set deal -->
	<div id="paigow321-deal" class="paigow321-deal">
		<div id="pgset-div-1" class="pgset set-1 pgset-medium" style="display:none">{% show_pgset pgsets.0 "0" "medium" %}</div>
		<div id="pgset-div-2" class="pgset set-2 pgset-medium" style="display:none">{% show_pgset pgsets.1 "1" "medium" %}</div>
		<div id="pgset-div-3" class="pgset set-3 pgset-medium" style="display:none">{% show_pgset pgsets.2 "2" "medium" %}</div>
	</div>
{% endblock %}
